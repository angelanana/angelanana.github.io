<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Vue3ç»„åˆå¼APIæœ€æ–°å®è·µ</title>
    <link href="/2025/04/01/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%9C%80%E6%96%B0%E5%AE%9E%E8%B7%B5/"/>
    <url>/2025/04/01/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%9C%80%E6%96%B0%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Vue3ç»„åˆå¼APIæ˜¯Vue3å¼•å…¥çš„ä¸€ç§æ–°çš„APIé£æ ¼ï¼Œå®ƒé€šè¿‡å°†ç»„ä»¶çš„é€»è¾‘æ‹†åˆ†ä¸ºå¤šä¸ªå¯é‡ç”¨çš„å‡½æ•°ï¼Œä½¿å¾—ç»„ä»¶çš„ä»£ç æ›´åŠ æ¸…æ™°ã€å¯ç»´æŠ¤å’Œå¯æµ‹è¯•ã€‚æœ¬æ–‡å°†ä»‹ç»Vue3ç»„åˆå¼APIçš„æœ€æ–°å®è·µï¼ŒåŒ…æ‹¬æœ€ä½³å®è·µã€æ€§èƒ½ä¼˜åŒ–å’Œæœªæ¥å‘å±•è¶‹åŠ¿ã€‚</p><h1 id="ä¸€ã€ä¸ºä»€ä¹ˆç»„åˆå¼APIæ˜¯Vue3çš„é©å‘½æ€§å‡çº§"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆç»„åˆå¼APIæ˜¯Vue3çš„é©å‘½æ€§å‡çº§" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆç»„åˆå¼APIæ˜¯Vue3çš„é©å‘½æ€§å‡çº§"></a>ä¸€ã€ä¸ºä»€ä¹ˆç»„åˆå¼APIæ˜¯Vue3çš„é©å‘½æ€§å‡çº§</h1><h2 id="1-1-é€‰é¡¹å¼APIçš„ç—›ç‚¹"><a href="#1-1-é€‰é¡¹å¼APIçš„ç—›ç‚¹" class="headerlink" title="1.1 é€‰é¡¹å¼APIçš„ç—›ç‚¹"></a>1.1 é€‰é¡¹å¼APIçš„ç—›ç‚¹</h2><ul><li><strong>ä»£ç ç¢ç‰‡åŒ–ï¼š</strong>æ•°æ®åœ¨ <code>data</code>ï¼Œæ–¹æ³•åœ¨ <code>methods</code>ï¼Œè®¡ç®—å±æ€§åœ¨<code>computed</code>ï¼Œç”Ÿå‘½å‘¨æœŸé’©å­åœ¨ <code>mounted</code> ç­‰é€‰é¡¹ä¸­åˆ†æ•£ã€‚</li><li><strong>é€»è¾‘è€¦åˆï¼š</strong>1000è¡Œç»„ä»¶ä¸­å»æ‰¾å…³è”é€»è¾‘å¦‚åŒå¤§æµ·æé’ˆã€‚</li><li><strong>å¯ç»´æŠ¤æ€§å·®ï¼š</strong>Mixinså­˜åœ¨å‘½åå†²çªå’Œæ¥æºä¸æ¸…æ™°é—®é¢˜ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ä¼ ç»ŸOptions APIï¼ˆç”¨æˆ·ç®¡ç†ç»„ä»¶ï¼‰</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">data</span> () &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">users</span>: [],<br>      <span class="hljs-attr">filters</span>: &#123;&#125;,<br>      <span class="hljs-attr">pagination</span>: &#123;&#125;<br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">fetchUsers</span> () &#123;<br>      <span class="hljs-comment">// å®ç°ç”¨æˆ·æ•°æ®è·å–é€»è¾‘</span><br>    &#125;,<br>    <span class="hljs-title function_">deleteUsers</span> () &#123;<br>      <span class="hljs-comment">// å®ç°ç”¨æˆ·è¿‡æ»¤é€»è¾‘</span><br>    &#125;,<br>    <span class="hljs-title function_">handlePagination</span> () &#123;<br>      <span class="hljs-comment">// å®ç°åˆ†é¡µé€»è¾‘</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">computed</span>: &#123;<br>    <span class="hljs-title function_">filteredUsers</span> () &#123;<br>      <span class="hljs-comment">// å®ç°ç”¨æˆ·è¿‡æ»¤è®¡ç®—</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">watch</span>: &#123;<br>    <span class="hljs-attr">filters</span>: &#123;<br>      <span class="hljs-title function_">handler</span> () &#123;<br>        <span class="hljs-comment">// å®ç°ç”¨æˆ·è¿‡æ»¤ç›‘å¬</span><br>      &#125;,<br>      <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="1-2-ç»„åˆå¼APIçš„ä¸‰å¤§ä¼˜åŠ¿"><a href="#1-2-ç»„åˆå¼APIçš„ä¸‰å¤§ä¼˜åŠ¿" class="headerlink" title="1.2 ç»„åˆå¼APIçš„ä¸‰å¤§ä¼˜åŠ¿"></a>1.2 ç»„åˆå¼APIçš„ä¸‰å¤§ä¼˜åŠ¿</h2><ul><li><strong>é€»è¾‘èšåˆï¼š</strong>æŒ‰åŠŸèƒ½è€Œéé€‰é¡¹ç»„ç»‡ä»£ç </li><li><strong>å®Œç¾å¤ç”¨ï¼š</strong>å‡½æ•°å¼å°è£…å®ç°â€å³æ’å³ç”¨â€</li><li><strong>ç±»å‹æ”¯æŒï¼š</strong>å¤©ç„¶é€‚é…TypeScript<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ä½¿ç”¨ç»„åˆå¼APIé‡æ„</span><br><span class="hljs-keyword">import</span> &#123; useUserFetch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./composables/userFetch&#x27;</span><br><span class="hljs-keyword">import</span> &#123; useTableFilter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./composables/tableFilter&#x27;</span><br> <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; users, fetchUsers &#125; = <span class="hljs-title function_">useUserFetch</span>()<br>    <span class="hljs-keyword">const</span> &#123; filteredData, filters &#125; = <span class="hljs-title function_">useTableFilter</span>(users)<br>    <br>    <span class="hljs-keyword">return</span> &#123; users, filteredData, filters, fetchUsers &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><!-- å¼•å…¥å¯¹æ¯”å›¾ --><img src="/images/Vue2vsVue3.png" alt="å›¾ç‰‡"></li></ul><h1 id="äºŒã€ç»„åˆå¼APIæ ¸å¿ƒæœºåˆ¶æ·±åº¦å‰–æï¼ˆé™„å®Œæ•´ä»£ç ï¼‰"><a href="#äºŒã€ç»„åˆå¼APIæ ¸å¿ƒæœºåˆ¶æ·±åº¦å‰–æï¼ˆé™„å®Œæ•´ä»£ç ï¼‰" class="headerlink" title="äºŒã€ç»„åˆå¼APIæ ¸å¿ƒæœºåˆ¶æ·±åº¦å‰–æï¼ˆé™„å®Œæ•´ä»£ç ï¼‰"></a>äºŒã€ç»„åˆå¼APIæ ¸å¿ƒæœºåˆ¶æ·±åº¦å‰–æï¼ˆé™„å®Œæ•´ä»£ç ï¼‰</h1><h2 id="2-1-setupå‡½æ•°ï¼šæ–°ä¸–ç•Œçš„å…¥å£"><a href="#2-1-setupå‡½æ•°ï¼šæ–°ä¸–ç•Œçš„å…¥å£" class="headerlink" title="2.1 setupå‡½æ•°ï¼šæ–°ä¸–ç•Œçš„å…¥å£"></a>2.1 setupå‡½æ•°ï¼šæ–°ä¸–ç•Œçš„å…¥å£</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;increment&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>// ç¼–è¯‘å™¨è¯­æ³•ç³–<br>import &#123; ref, onMounted &#125; from &#x27;vue&#x27;<br>const count = ref(0)<br>function increment() &#123;<br>  count.value++<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p><strong>å…³é”®ç»†èŠ‚ï¼š</strong></p><ul><li><strong>æ‰§è¡Œæ—¶æœº</strong>ï¼šåœ¨<code>beforeCreate</code>ä¹‹å‰</li><li><strong>å‚æ•°è§£æ</strong>ï¼š<code>props</code>æ˜¯å“åº”å¼çš„ï¼Œä¸ç”¨è§£æ„</li><li><strong>Contextå¯¹è±¡</strong>ï¼šåŒ…å«<code>attrs</code> &#x2F; <code>slots</code> &#x2F; <code>emit</code>ç­‰</li></ul><h2 id="2-2-ref-vs-reactive-é€‰æ‹©æŒ‡å—"><a href="#2-2-ref-vs-reactive-é€‰æ‹©æŒ‡å—" class="headerlink" title="2.2 ref() vs reactive() é€‰æ‹©æŒ‡å—"></a>2.2 ref() vs reactive() é€‰æ‹©æŒ‡å—</h2><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>åŸºç¡€ç±»å‹æ•°æ®</td><td><code>ref()</code></td><td>è‡ªåŠ¨è§£åŒ…ï¼Œæ¨¡æ¿ä½¿ç”¨æ›´æ–¹ä¾¿</td></tr><tr><td>å¤æ‚å¯¹è±¡&#x2F;æ•°ç»„</td><td><code>reactive()</code></td><td>æ·±å±‚å“åº”å¼ï¼Œæ€§èƒ½æ›´ä¼˜</td></tr><tr><td>ç¬¬ä¸‰æ–¹ç±»å®ä¾‹</td><td><code>reactive()</code></td><td>ä¿æŒåŸå‹é“¾æ–¹æ³•</td></tr><tr><td>è·¨ç»„ä»¶çŠ¶æ€å…±äº«</td><td><code>ref()</code> + <code>provide/inject</code></td><td>å“åº”å¼è¿½è¸ªæ›´å¯æ§</td></tr></tbody></table><p><strong>refçš„åº•å±‚åŸç†</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// æ·±å“åº”å¼</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ref</span>(<span class="hljs-params">value?: unknown</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createRef</span>(value, <span class="hljs-literal">false</span>)<br>&#125;<br><br><span class="hljs-comment">// æµ…å“åº”å¼</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shallowRef</span>(<span class="hljs-params">value?: unknown</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createRef</span>(value, <span class="hljs-literal">true</span>)<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createRef</span>(<span class="hljs-params">rawValue: unknown, shallow: boolean</span>) &#123;<br>  <span class="hljs-comment">// å¦‚æœä¼ å…¥çš„å€¼å·²ç»æ˜¯ä¸€ä¸ª refï¼Œåˆ™ç›´æ¥è¿”å›å®ƒ</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isRef</span>(rawValue)) &#123;<br>    <span class="hljs-keyword">return</span> rawValue<br>  &#125;<br>  <span class="hljs-comment">// å¦åˆ™ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ RefImpl å®ä¾‹</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RefImpl</span>(rawValue, shallow)<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RefImpl</span>&lt;T&gt; &#123;<br>  <span class="hljs-comment">// å­˜å‚¨å“åº”å¼çš„å€¼ã€‚æˆ‘ä»¬è¿½è¸ªå’Œæ›´æ–°çš„å°±æ˜¯_valueã€‚ï¼ˆè¿™ä¸ªæ˜¯é‡ç‚¹ï¼‰</span><br>  private <span class="hljs-attr">_value</span>: T<br>  <span class="hljs-comment">// ç”¨äºå­˜å‚¨åŸå§‹å€¼ï¼Œå³æœªç»ä»»ä½•å“åº”å¼å¤„ç†çš„å€¼ã€‚ï¼ˆç”¨äºå¯¹æ¯”çš„ï¼Œè¿™å—çš„å†…å®¹å¯ä»¥ä¸çœ‹ï¼‰</span><br>  private <span class="hljs-attr">_rawValue</span>: T <br><br>  <span class="hljs-comment">// ç”¨äºä¾èµ–è·Ÿè¸ªçš„ Dep ç±»å®ä¾‹</span><br>  public dep?: <span class="hljs-title class_">Dep</span> = <span class="hljs-literal">undefined</span><br>  <span class="hljs-comment">// ä¸€ä¸ªæ ‡è®°ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª ref å®ä¾‹</span><br>  public readonly __v_isRef = <span class="hljs-literal">true</span><br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span><br><span class="hljs-params">    value: T,</span><br><span class="hljs-params">    public readonly __v_isShallow: boolean,</span><br><span class="hljs-params">  </span>) &#123;<br>    <span class="hljs-comment">// å¦‚æœæ˜¯æµ…å“åº”å¼ï¼Œç›´æ¥ä½¿ç”¨åŸå§‹å€¼ï¼Œå¦åˆ™è½¬æ¢ä¸ºéå“åº”å¼åŸå§‹å€¼</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_rawValue</span> = __v_isShallow ? value : <span class="hljs-title function_">toRaw</span>(value)<br>    <span class="hljs-comment">// å¦‚æœæ˜¯æµ…å“åº”å¼ï¼Œç›´æ¥ä½¿ç”¨åŸå§‹å€¼ï¼Œå¦åˆ™è½¬æ¢ä¸ºå“åº”å¼å€¼</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = __v_isShallow ? value : <span class="hljs-title function_">toReactive</span>(value)<br>    <br>    <span class="hljs-comment">// toRaw ç”¨äºå°†å“åº”å¼å¼•ç”¨è½¬æ¢å›åŸå§‹å€¼</span><br>    <span class="hljs-comment">// toReactive å‡½æ•°ç”¨äºå°†ä¼ å…¥çš„å€¼è½¬æ¢ä¸ºå“åº”å¼å¯¹è±¡ã€‚å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ŒtoReactive ç›´æ¥è¿”å›åŸå§‹å€¼ã€‚</span><br>    <span class="hljs-comment">// å¯¹äºå¯¹è±¡å’Œæ•°ç»„ï¼ŒtoReactive å†…éƒ¨ä¼šè°ƒç”¨ reactive æ¥åˆ›å»ºä¸€ä¸ªå“åº”å¼ä»£ç†ã€‚</span><br>    <span class="hljs-comment">// å› æ­¤ï¼Œå¯¹äº ref æ¥è¯´ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ä¼šè¢« RefImpl ç›´æ¥åŒ…è£…ï¼Œè€Œå¯¹è±¡å’Œæ•°ç»„</span><br>    <span class="hljs-comment">// ä¼šè¢« reactive è½¬æ¢ä¸ºå“åº”å¼ä»£ç†ï¼Œæœ€åä¹Ÿä¼šè¢« RefImpl åŒ…è£…ã€‚</span><br>    <span class="hljs-comment">// è¿™æ ·ï¼Œæ— è®ºæ˜¯å“ªç§ç±»å‹çš„æ•°æ®ï¼Œref éƒ½å¯ä»¥æä¾›å“åº”å¼çš„ value å±æ€§ï¼Œ</span><br>    <span class="hljs-comment">// ä½¿å¾—æ•°æ®å˜åŒ–å¯ä»¥è¢« Vue æ­£ç¡®è¿½è¸ªå’Œæ›´æ–°ã€‚</span><br>    <span class="hljs-comment">// export const toReactive = (value) =&gt; isObject(value) ? reactive(value) : value</span><br>  &#125;<br><br>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() &#123;<br>    <span class="hljs-comment">// è¿½è¸ªä¾èµ–ï¼Œè¿™æ ·å½“ ref çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¾èµ–è¿™ä¸ª ref çš„ç»„ä»¶æˆ–å‰¯ä½œç”¨å‡½æ•°å¯ä»¥é‡æ–°è¿è¡Œã€‚</span><br>    <span class="hljs-title function_">trackRefValue</span>(<span class="hljs-variable language_">this</span>)<br>    <span class="hljs-comment">// è¿”å›å­˜å‚¨çš„å“åº”å¼å€¼</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span><br>  &#125;<br><br>  <span class="hljs-keyword">set</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">newVal</span>) &#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦åº”è¯¥ä½¿ç”¨æ–°å€¼çš„ç›´æ¥å½¢å¼ï¼ˆæµ…å“åº”å¼æˆ–åªè¯»ï¼‰</span><br>    <span class="hljs-keyword">const</span> useDirectValue =<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">__v_isShallow</span> || <span class="hljs-title function_">isShallow</span>(newVal) || <span class="hljs-title function_">isReadonly</span>(newVal)<br>    <span class="hljs-comment">// å¦‚æœéœ€è¦ï¼Œå°†æ–°å€¼è½¬æ¢ä¸ºéå“åº”å¼åŸå§‹å€¼</span><br>    newVal = useDirectValue ? newVal : <span class="hljs-title function_">toRaw</span>(newVal)<br>    <span class="hljs-comment">// å¦‚æœæ–°å€¼ä¸æ—§å€¼ä¸åŒï¼Œæ›´æ–° _rawValue å’Œ _value</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">hasChanged</span>(newVal, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_rawValue</span>)) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_rawValue</span> = newVal<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = useDirectValue ? newVal : <span class="hljs-title function_">toReactive</span>(newVal)<br>      <span class="hljs-comment">// è§¦å‘ä¾èµ–æ›´æ–°</span><br>      <span class="hljs-title function_">triggerRefValue</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-title class_">DirtyLevels</span>.<span class="hljs-property">Dirty</span>, newVal)<br>    &#125;<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>refæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå†…éƒ¨å€¼å¹¶ä¸”è¿”å›ä¸€ä¸ªå“åº”å¼ä¸”å¯å˜çš„å¼•ç”¨å¯¹è±¡ã€‚è¿™ä¸ªå¼•ç”¨å¯¹è±¡æœ‰ä¸€ä¸ª<code>.value</code>å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å†…éƒ¨å€¼ã€‚</p><p><strong>reactiveçš„åº•å±‚åŸç†</strong><br><code>reactive</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯¹è±¡å¹¶è¿”å›è¯¥å¯¹è±¡çš„å“åº”å¼ä»£ç†ï¼Œä¹Ÿå°±æ˜¯<code>proxy</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">target</span>) &#123;<br>  <span class="hljs-keyword">if</span> (target &amp;&amp; target.<span class="hljs-property">__v_isReactive</span>) &#123;<br>    <span class="hljs-keyword">return</span> target<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createReactiveObject</span>(<br>    target,<br>    <span class="hljs-literal">false</span>,<br>    mutableHandlers,<br>    mutableCollectionHandlers,<br>    reactiveMap<br>  )<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createReactiveObject</span>(<span class="hljs-params"></span><br><span class="hljs-params">  target,</span><br><span class="hljs-params">  isReadonly,</span><br><span class="hljs-params">  baseHandlers,</span><br><span class="hljs-params">  collectionHandlers,</span><br><span class="hljs-params">  proxyMap</span><br><span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isObject</span>(target)) &#123;<br>    <span class="hljs-keyword">return</span> target<br>  &#125;<br>  <br>  <span class="hljs-keyword">const</span> existingProxy = proxyMap.<span class="hljs-title function_">get</span>(target)<br>  <span class="hljs-keyword">if</span> (existingProxy) &#123;<br>    <span class="hljs-keyword">return</span> existingProxy<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, baseHandlers)<br>  proxyMap.<span class="hljs-title function_">set</span>(target, proxy)<br>  <span class="hljs-keyword">return</span> proxy<br>&#125;<br></code></pre></td></tr></table></figure><p><code>reactive</code>çš„æºç ç®€å•å¾ˆå¤šï¼Œ<code>reactive</code>é€šè¿‡<code>new Proxy(target, baseHandlers)</code> åˆ›å»ºäº†ä¸€ä¸ªä»£ç†ã€‚è¿™ä¸ªä»£ç†ä¼šæ‹¦æˆªå¯¹ç›®æ ‡å¯¹è±¡çš„æ“ä½œï¼Œä»è€Œå®ç°å“åº”å¼ã€‚</p><p>å…·ä½“çš„ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">let</span> state = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> &#125;)<br>state.<span class="hljs-property">count</span>++<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºrefå’Œreactiveçš„åŒºåˆ«ï¼š</p><ul><li>åº•å±‚åŸç†ä¸ä¸€æ ·</li><li><code>ref</code>é‡‡ç”¨<code>RefImpl</code>å®ç°ï¼Œ<code>reactive</code>åˆ™é‡‡ç”¨<code>Proxy</code>å®ç°</li></ul><h3 id="refæ›´æ·±å…¥çš„ç†è§£"><a href="#refæ›´æ·±å…¥çš„ç†è§£" class="headerlink" title="refæ›´æ·±å…¥çš„ç†è§£"></a>refæ›´æ·±å…¥çš„ç†è§£</h3><p>å½“ä½ ä½¿ç”¨ <code>new RefImpl(value)</code> åˆ›å»ºä¸€ä¸ª <code>RefImpl</code> å®ä¾‹æ—¶ï¼Œå®é™…ä¸Šå‘ç”Ÿäº†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><strong>å†…éƒ¨å€¼</strong>ï¼šå®ä¾‹å­˜å‚¨äº†ä¼ é€’ç»™æ„é€ å‡½æ•°çš„åˆå§‹å€¼ã€‚</li><li><strong>ä¾èµ–æ”¶é›†</strong>ï¼šå®ä¾‹éœ€è¦è·Ÿè¸ªæ‰€æœ‰ä¾èµ–äºä»–çš„æ•ˆæœï¼ˆeffectï¼‰ï¼Œä¾‹å¦‚è®¡ç®—å±æ€§æˆ–è€…å‰¯ä½œç”¨å‡½æ•°ã€‚é€šå¸¸é€šè¿‡ä¸€ä¸ªä¾èµ–åˆ—è¡¨æˆ–å‡½æ•°æ¥å®ç°ã€‚</li><li><strong>è§¦å‘æ›´æ–°</strong>ï¼šå½“å®ä¾‹çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒéœ€è¦é€šçŸ¥æ‰€æœ‰ä¾èµ–å®ƒçš„æ•ˆæœè¿›è¡Œæ›´æ–°ï¼Œä»¥ä¾¿ä»–ä»¬å¯ä»¥é‡æ–°è®¡ç®—æˆ–æ‰§è¡Œã€‚</li></ol><p>RefImpl ç±»ä¼¼äºå‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„è®¾è®¡ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„<code>RefImpl</code>ç±»çš„ä¼ªä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dep</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();<br>  &#125;<br>  <span class="hljs-title function_">depend</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (activeEffect) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span>.<span class="hljs-title function_">add</span>(activeEffect);<br>    &#125;<br>  &#125;<br>  <span class="hljs-title function_">notify</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-title function_">effect</span>());<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> activeEffect = <span class="hljs-literal">null</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">watchEffect</span>(<span class="hljs-params">effect</span>) &#123;<br>  activeEffect = effect;<br>  <span class="hljs-title function_">effect</span>();<br>  activeEffect = <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RefImpl</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">value</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = value;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>();<br>  &#125;<br>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() &#123;<br>    <span class="hljs-comment">// å½“è·å–å€¼æ—¶ï¼Œè¿›è¡Œä¾èµ–æ”¶é›†</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span>.<span class="hljs-title function_">depend</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span>;<br>  &#125;<br>  <span class="hljs-keyword">set</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">newValue</span>) &#123;<br>    <span class="hljs-keyword">if</span> (newValue !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = newValue;<br>      <span class="hljs-comment">// å€¼æ”¹å˜æ—¶ï¼Œè§¦å‘æ›´æ–°</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span>.<span class="hljs-title function_">notify</span>();<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨å®ä¾‹</span><br><span class="hljs-keyword">let</span> count = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RefImpl</span>(<span class="hljs-number">0</span>);<br><br><span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Effect 1:&#x27;</span>, count.<span class="hljs-property">value</span>); <span class="hljs-comment">// è®¢é˜…å˜åŒ–</span><br>&#125;)<br>count.<span class="hljs-property">value</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// è§¦å‘æ›´æ–°</span><br></code></pre></td></tr></table></figure><p>Depç±»è´Ÿè´£ç®¡ç†ä¸€ä¸ªä¾èµ–åˆ—è¡¨ï¼Œå¹¶æä¾›ä¾èµ–æ”¶é›†å’Œé€šçŸ¥æ›´æ–°çš„åŠŸèƒ½ï¼›RefImplç±»åŒ…å«ä¸€ä¸ªå†…éƒ¨å€¼_valueå’Œä¸€ä¸ªDepå®ä¾‹ã€‚å½“valueè¢«è®¿é—®æ—¶ï¼Œé€šè¿‡getæ–¹æ³•è¿›è¡Œä¾èµ–æ”¶é›†ï¼›å½“valueè¢«èµ‹äºˆæ–°å€¼æ—¶ï¼Œé€šè¿‡setæ–¹æ³•è§¦å‘æ›´æ–°ã€‚</p><h3 id="reactiveçš„å±€é™æ€§"><a href="#reactiveçš„å±€é™æ€§" class="headerlink" title="reactiveçš„å±€é™æ€§"></a>reactiveçš„å±€é™æ€§</h3><p>Vue3ä¸­ï¼Œreactive API é€šè¿‡ proxyå®ç°äº†ä¸€ç§å“åº”å¼æ•°æ®çš„æ–¹å¼ï¼Œå°½ç®¡è¿™ç§æ–¹æ³•åœ¨æ€§èƒ½ä¸Šæ¯”vue2æœ‰æ‰€æå‡ï¼Œä½†proxyçš„å±€é™æ€§ä¹Ÿå¯¼è‡´äº†reactiveçš„å±€é™æ€§ï¼Œè¿™äº›å±€é™æ€§ä¼šå½±å“å¼€å‘è€…çš„ä½¿ç”¨ä½“éªŒã€‚<br>1.ä»…å¯¹å¼•ç”¨æ•°æ®ç±»å‹æœ‰æ•ˆ<br>reactive ä¸»è¦é€‚ç”¨äºå¯¹è±¡ï¼ŒåŒ…æ‹¬æ•°ç»„å’Œä¸€äº›é›†åˆç±»å‹ï¼ˆå¦‚ï¼šMapå’ŒSetï¼‰ã€‚å¯¹äºåŸºç¡€æ•°æ®ç±»å‹ï¼ˆå¦‚ï¼šstringã€numberã€booleanï¼‰ï¼Œreactive æ— æ³•ç›´æ¥å“åº”ã€‚<br>2.ä½¿ç”¨ä¸å½“ä¼šå¤±å»å“åº”</p><ul><li>ç›´æ¥èµ‹å€¼å¯¹è±¡ï¼Œå¤±å»å“åº”æ€§</li><li>ç›´æ¥æ›¿æ¢å“åº”å¯¹è±¡ï¼Œå¤±å»å“åº”æ€§</li><li>ç›´æ¥è§£æ„å¯¹è±¡ï¼Œä¼šå¤±å»å“åº”æ€§ã€‚è§£å†³ï¼šç”¨toRefså‡½æ•°æ¥å°†å“åº”å¼å¯¹è±¡è½¬æ¢ä¸ºrefå¯¹è±¡</li><li>å°†å“åº”å¼å¯¹è±¡çš„å±æ€§èµ‹å€¼ç»™å˜é‡ï¼Œä¼šå¤±å»å“åº”å¼</li></ul><h1 id="é«˜çº§å®æˆ˜æŠ€å·§"><a href="#é«˜çº§å®æˆ˜æŠ€å·§" class="headerlink" title="é«˜çº§å®æˆ˜æŠ€å·§"></a>é«˜çº§å®æˆ˜æŠ€å·§</h1><h2 id="3-1-é€šç”¨æ•°æ®è¯·æ±‚å°è£…"><a href="#3-1-é€šç”¨æ•°æ®è¯·æ±‚å°è£…" class="headerlink" title="3.1 é€šç”¨æ•°æ®è¯·æ±‚å°è£…"></a>3.1 é€šç”¨æ•°æ®è¯·æ±‚å°è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// useFetch.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useFetch</span> = (<span class="hljs-params">url</span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)<br>  <span class="hljs-keyword">const</span> error = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)<br>  <span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span><br>      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(url)<br>      data.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span><br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      error.<span class="hljs-property">value</span> = err<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>      loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-title function_">onMounted</span>(fetchData)<br>  <span class="hljs-keyword">return</span> &#123; data, error, loading, <span class="hljs-attr">retry</span>: fetchData &#125;<br>&#125;<br><br><span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">data</span>: posts &#125; = <span class="hljs-title function_">useFetch</span>(<span class="hljs-string">&#x27;/api/posts&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="3-2-é˜²æŠ–æ¢ç´¢å®æˆ˜"><a href="#3-2-é˜²æŠ–æ¢ç´¢å®æˆ˜" class="headerlink" title="3.2 é˜²æŠ–æ¢ç´¢å®æˆ˜"></a>3.2 é˜²æŠ–æ¢ç´¢å®æˆ˜</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// useDebounceSearch.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useDebounceSearch</span>(<span class="hljs-params">callback, delay=<span class="hljs-number">500</span></span>) &#123;<br>  <span class="hljs-keyword">const</span> searchQuery = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br>  <span class="hljs-keyword">let</span> timeoutId = <span class="hljs-literal">null</span><br><br>  <span class="hljs-title function_">watch</span>(searchQuery, <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">clearTimeout</span>(timeoutId)<br>    timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-title function_">callback</span>(newVal)<br>    &#125;, delay)<br>  &#125;)<br><br>  <span class="hljs-keyword">return</span> &#123; searchQuery &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ"><a href="#æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ"></a>æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ</h1><h2 id="4-1-è®¡ç®—å±æ€§ç¼“å­˜ç­–ç•¥"><a href="#4-1-è®¡ç®—å±æ€§ç¼“å­˜ç­–ç•¥" class="headerlink" title="4.1 è®¡ç®—å±æ€§ç¼“å­˜ç­–ç•¥"></a>4.1 è®¡ç®—å±æ€§ç¼“å­˜ç­–ç•¥</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> filteredList = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// é€šè¿‡é—­åŒ…ç¼“å­˜ä¸­é—´ç»“æœ</span><br>  <span class="hljs-keyword">const</span> cached = &#123;&#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">filterKey</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span>(cache[filterKey]) <span class="hljs-keyword">return</span> cache[filterKey]<br>    <span class="hljs-keyword">return</span> cache[filterKey] = <span class="hljs-title function_">heavyCompute</span>()<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="4-2-watchEffect-çš„é«˜çº§ç”¨æ³•"><a href="#4-2-watchEffect-çš„é«˜çº§ç”¨æ³•" class="headerlink" title="4.2 watchEffect()çš„é«˜çº§ç”¨æ³•"></a>4.2 watchEffect()çš„é«˜çº§ç”¨æ³•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ç«‹å³æ‰§è¡Œ+è‡ªåŠ¨è¿½è¸ªä¾èµ–</span><br><span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">fetchData</span>(params.<span class="hljs-property">value</span>)<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ä¾èµ–è‡ªåŠ¨è¿½è¸ªï¼š&#x27;</span>,data)<br>&#125;, &#123;<br>  <span class="hljs-attr">flush</span>: <span class="hljs-string">&#x27;post&#x27;</span>, <span class="hljs-comment">// DOMæ›´æ–°åæ‰§è¡Œ</span><br>  <span class="hljs-title function_">onTrack</span>(<span class="hljs-params">e</span>) &#123;&#125; <span class="hljs-comment">// è°ƒè¯•è¿½è¸ª</span><br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="4-3-å†…å‚¬æ³„éœ²é˜²èŒƒ"><a href="#4-3-å†…å‚¬æ³„éœ²é˜²èŒƒ" class="headerlink" title="4.3 å†…å‚¬æ³„éœ²é˜²èŒƒ"></a>4.3 å†…å‚¬æ³„éœ²é˜²èŒƒ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// å®šæ—¶å™¨ç¤ºä¾‹</span><br><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;...&#125;, <span class="hljs-number">1000</span>)<br>  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer))<br>&#125;)<br></code></pre></td></tr></table></figure><h1 id="TypeScriptç»ˆçº§é€‚é…æ–¹æ¡ˆ"><a href="#TypeScriptç»ˆçº§é€‚é…æ–¹æ¡ˆ" class="headerlink" title="TypeScriptç»ˆçº§é€‚é…æ–¹æ¡ˆ"></a>TypeScriptç»ˆçº§é€‚é…æ–¹æ¡ˆ</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js">interface <span class="hljs-title class_">User</span> &#123;<br>  <span class="hljs-attr">name</span>: string<br>  <span class="hljs-attr">age</span>: number,<br>  <span class="hljs-attr">id</span>: number<br>&#125;<br><br><span class="hljs-comment">// å¸¦ç±»å‹çš„Ref</span><br><span class="hljs-keyword">const</span> user = ref&lt;<span class="hljs-title class_">User</span>&gt;(&#123;<span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>&#125;)<br><br><span class="hljs-comment">// ç»„åˆå‡½æ•°ç±»å‹å®šä¹‰</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCounter</span>(<span class="hljs-params"></span>): &#123;<br>  <span class="hljs-attr">count</span>: <span class="hljs-title class_">Ref</span>&lt;number&gt;<br>  <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span><br>&#125; &#123;<br>  <span class="hljs-comment">// å®ç°é€»è¾‘...</span><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¦‚æœä½ å¯¹è¿™ç¯‡æ–‡ç« æœ‰ä»»ä½•ç–‘é—®ã€å»ºè®®æˆ–è€…ç‹¬ç‰¹çš„è§è§£ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚æ— è®ºæ˜¯æ¢è®¨æŠ€æœ¯ç»†èŠ‚ï¼Œè¿˜æ˜¯åˆ†äº«é¡¹ç›®ç»éªŒï¼Œéƒ½èƒ½è®©æˆ‘ä»¬å…±åŒè¿›æ­¥ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Vue3</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Angelanana | Full-stack Explorer</title>
    <link href="/2025/01/03/me/"/>
    <url>/2025/01/03/me/</url>
    
    <content type="html"><![CDATA[<div class="bio-container">  <div class="lang-section cn">  <h3 id="ğŸ‘©ğŸ’»-æŠ€æœ¯è½¨è¿¹"><a href="#ğŸ‘©ğŸ’»-æŠ€æœ¯è½¨è¿¹" class="headerlink" title="ğŸ‘©ğŸ’» æŠ€æœ¯è½¨è¿¹"></a>ğŸ‘©ğŸ’» æŠ€æœ¯è½¨è¿¹</h3><p><strong>å…¨æ ˆå·¥ç¨‹å¸ˆ</strong> | <strong>å¼€æºè´¡çŒ®è€…</strong> | <strong>ç»ˆèº«å­¦ä¹ è€…</strong></p><p><strong>2020-2025</strong> å‰ç«¯é¢†åŸŸæ·±åº¦å®è·µè€…ï¼š</p><ul><li><strong>æ ¸å¿ƒé¢†åŸŸ</strong>ï¼šVue2&#x2F;3å…¨æ ˆæ–¹æ¡ˆã€NuxtæœåŠ¡ç«¯æ¸²æŸ“ã€Electronæ¡Œé¢å¼€å‘</li><li><strong>æŠ€æœ¯ç”Ÿæ€</strong>ï¼šNestJSä¼ä¸šçº§æ¡†æ¶ã€Nodeä¸­é—´ä»¶å¼€å‘ã€Webpack&#x2F;Viteå·¥ç¨‹åŒ–ä½“ç³»</li><li><strong>æ¶æ„å®è·µ</strong>ï¼šä¸»å¯¼5+ä¸­åå°ç³»ç»Ÿï¼Œè®¾è®¡è·¨é¡¹ç›®ç»„ä»¶åº“ï¼Œå‚ä¸åä¸ºå¼€æºç»„ä»¶å¼€å‘</li></ul><p><strong>æŠ€æœ¯é‡Œç¨‹ç¢‘</strong>ï¼š</p><ul><li><p>ğŸ† 2022å¹´åä¸ºDevUIå¼€æºè´¡çŒ®è€…ï¼Œä¸»å¯¼é¢åŒ…å±‘å¯¼èˆªã€æ ‘å½¢é€‰æ‹©ç»„ä»¶å¼€å‘ï¼ˆ10+é¡¹ç›®é‡‡ç”¨ï¼‰</p></li><li><p>ğŸš€ æ„å»ºä¼ä¸šçº§ç»„ä»¶åº“æ¶æ„ï¼Œå¼€å‘æ•ˆç‡æå‡40%ï¼Œç¼–åˆ¶ã€ŠVue3ç»„åˆå¼APIæœ€ä½³å®è·µã€‹</p></li><li><p>ğŸ”¥ 2025å¹´å®ŒæˆNuxt3é¡¹ç›®é‡æ„ï¼Œé¦–å±æ€§èƒ½ä¼˜åŒ–è‡³LCP 0.8sï¼ˆä¸‹é™62%ï¼‰</p></div><div class="lang-section en"></li></ul><h3 id="ğŸ‘©ğŸ’»-Tech-Odyssey"><a href="#ğŸ‘©ğŸ’»-Tech-Odyssey" class="headerlink" title="ğŸ‘©ğŸ’» Tech Odyssey"></a>ğŸ‘©ğŸ’» Tech Odyssey</h3><p><strong>Full-stack Engineer</strong> | <strong>OSS Contributor</strong> | <strong>Lifelong Learner</strong></p><p><strong>2020-2025</strong> Frontend Specialist:</p><ul><li><strong>Core Stack</strong>: Vue2&#x2F;3 Full Solutions, Nuxt SSR, Electron Desktop Dev</li><li><strong>Tech Ecosystem</strong>: NestJS Enterprise Framework, Node Middleware, Webpack&#x2F;Vite Tooling</li><li><strong>Architecture</strong>: Led 5+ Admin Systems, Designed Cross-project Component Library, Contributed to Huawei OSS</li></ul><p><strong>Milestones</strong>:</p><ul><li><p>ğŸ† 2022 Huawei DevUI Contributor (Breadcrumb &amp; TreeSelect components adopted by 10+ projects)</p></li><li><p>ğŸš€ Built enterprise component library boosting 40% dev efficiency, authoredã€ŠVue3 Composition API Best Practicesã€‹</p></li><li><p>ğŸ”¥ 2025 Nuxt3 SSR optimization achieving 0.8s LCP (62% improvement)</p></div></li></ul></div><style>.bio-container {display: flex; gap: 40px; margin: 2rem 0;}.lang-section {flex: 1;}.lang-section.cn h3 {color: #2c3e50;}.lang-section.en h3 {color: #34495e;}@media (max-width: 768px) {  .bio-container {flex-direction: column;}}</style><p>ğŸ› ï¸ <strong>æŠ€æœ¯èšç„¦ | Tech Focus</strong></p><ul><li>WebAssemblyæ€§èƒ½ä¼˜åŒ–å®è·µ &#x2F; WebAssembly Performance Optimization</li><li>NestJSå¾®æœåŠ¡æ¶æ„ &#x2F; NestJS Microservices</li><li>Monorepoå·¥ç¨‹åŒ–æ–¹æ¡ˆ &#x2F; Turborepo Monorepo Solutions</li></ul><p>ğŸŒ± <strong>æˆé•¿ä¹‹é“ | Growth Philosophy</strong></p><ul><li><strong>æŠ€æœ¯çºµæ·±</strong>ï¼šå¹´æŠ•å…¥300+håˆ»æ„ç»ƒä¹ ï¼Œç³»ç»Ÿè¡¥è¶³CSæ ¸å¿ƒçŸ¥è¯† &#x2F; Annual 300+h deliberate practice on CS fundamentals</li><li><strong>è·¨ç•Œèåˆ</strong>ï¼šåœ¨èŒè€ƒç ”é”»é€ é«˜æ•ˆæ—¶é—´ç®¡ç† &#x2F; Enhanced time management through part-time grad prep</li><li><strong>æ€ç»´å‡çº§</strong>ï¼šæ™®æ‹‰ææ•™å­¦å®è·µå¯å‘æŠ€æœ¯æ¶æ„è®¾è®¡ &#x2F; Pilates teaching inspires systematic technical design</li></ul><p>ğŸ¹ <strong>ç”Ÿæ´»ç»´åº¦ | Life Palette</strong></p><ul><li>é’¢ç´15å¹´æ¼”å¥ &#x2F; 15 years of piano performance experience</li><li>åŒ—ææ˜Ÿæ™®æ‹‰æè®¤è¯ï¼ˆå¤‡è€ƒä¸­ï¼‰&#x2F; Polestar Pilates Certification (In-Progress)</li><li>2024ä¹¦å•ï¼šã€Šé©¬æ–¯å…‹ä¼ ã€‹ã€Šè¶…è¶Šç™¾å²ã€‹ã€Šæˆ‘åœ¨åŒ—äº¬é€å¿«é€’ã€‹&#x2F; 2024 Reads: Elon Musk, Outlive, Delivery Diaries</li></ul><p>ğŸ“® <strong>Connect | æœŸå¾…äº¤æµ</strong><br><a href="https://github.com/angelanana">GitHub</a> | <a href="https://juejin.cn/user/2463372060667735">æ˜é‡‘</a> | <a href="https://x.com/angelanana17894">X</a><br><em>â€œStay hungry, stay foolish. åœ¨æ¯”ç‰¹ä¸å­—èŠ‚çš„ä¸–ç•Œï¼Œæˆ‘ä»¬æ°¸è¿œéƒ½æ˜¯æ–°ç”Ÿâ€</em><br><em>â€œStay hungry, stay foolish. In the realm of bits and bytes, we remain perpetual learners.â€</em></p>]]></content>
    
    
    
    <tags>
      
      <tag>Frontend Development</tag>
      
      <tag>Vue Ecosystem</tag>
      
      <tag>Open Source</tag>
      
      <tag>Tech Growth</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
